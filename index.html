<!DOCTYPE html>
<html lang="ur" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SSelix Store</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">

<style>
body{font-family:sans-serif;background:#fdf2f4;padding-bottom:100px}
.choice-btn{background:white;padding:25px;border-radius:20px;margin-bottom:20px;cursor:pointer;border:1px solid #ddd}
.choice-btn:hover{background:#eee}
#catalogSection,#shopSection{display:none}
.bottom-nav{position:fixed;bottom:0;left:0;width:100%;background:white;padding:15px;text-align:center;border-top:1px solid #ddd}
.card{border-radius:15px}
</style>
</head>
<body>

<div class="container mt-5" id="homeView">
    <div class="choice-btn" onclick="openShop()">
        <h4>Shop Collection</h4>
        <small>Ø¨Ø±Ø§Û Ø±Ø§Ø³Øª Ø®Ø±ÛŒØ¯Ø§Ø±ÛŒ Ú©Ø±ÛŒÚº</small>
    </div>

    <div class="choice-btn" onclick="showCatalog()">
        <h4>View Catalog</h4>
        <small>Ø¨ÛŒØ±ÙˆÙ†ÛŒ Ù„Ù†Ú©Ø³ Ø³Û’ Ø¢Ø±ÚˆØ± Ú©Ø±ÛŒÚº</small>
    </div>
</div>

<!-- Catalog -->
<div class="container mt-4" id="catalogSection">
    <button class="btn btn-secondary mb-3" onclick="goHome()">ÙˆØ§Ù¾Ø³ Ø¬Ø§Ø¦ÛŒÚº</button>
    <div id="catalogContainer" class="row g-3"></div>
</div>

<!-- Shop -->
<div class="container mt-4" id="shopSection">
    <button class="btn btn-secondary mb-3" onclick="goHome()">ÙˆØ§Ù¾Ø³ Ø¬Ø§Ø¦ÛŒÚº</button>

    <div id="cartItems"></div>

    <div class="mt-4">
        <form onsubmit="submitOrder(event)">
            <input class="form-control mb-2" id="name" placeholder="Ù†Ø§Ù…" required>
            <input class="form-control mb-2" id="phone" placeholder="ÙˆØ§Ù¹Ø³ Ø§ÛŒÙ¾ Ù†Ù…Ø¨Ø±" required>
            <input class="form-control mb-2" id="city" placeholder="Ø´ÛØ±" required>

            <select class="form-control mb-2" id="province" onchange="updateDelivery()" required>
                <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ø±ÛŒÚº</option>
                <option value="peshawar">Ù¾Ø´Ø§ÙˆØ±</option>
                <option value="kpk">KPK</option>
                <option value="other">Ø¯ÛŒÚ¯Ø± ØµÙˆØ¨Û’</option>
                <option value="pickup">Ø®ÙˆØ¯ Ø¢ Ú©Ø± ÙˆØµÙˆÙ„ Ú©Ø±ÛŒÚº (Pickup)</option>
            </select>

            <textarea class="form-control mb-2" id="address" placeholder="Ù…Ú©Ù…Ù„ Ù¾ØªÛ"></textarea>

            <div id="deliveryText" class="fw-bold"></div>

            <button class="btn btn-success w-100 mt-3">ÙˆØ§Ù¹Ø³ Ø§ÛŒÙ¾ Ù¾Ø± Ø¢Ø±ÚˆØ± Ú©Ø±ÛŒÚº</button>
        </form>
    </div>
</div>

<div class="bottom-nav">
SSelix Official Store
</div>

<!-- DATA FILE -->
<script src="data.js"></script>

<script>
let cart=[];
let delivery=0;

/* ---------- NAVIGATION ---------- */
function openShop(){
document.getElementById("homeView").style.display="none";
document.getElementById("catalogSection").style.display="none";
document.getElementById("shopSection").style.display="block";
renderCart();
}

function showCatalog(){
document.getElementById("homeView").style.display="none";
document.getElementById("shopSection").style.display="none";
document.getElementById("catalogSection").style.display="block";
renderCatalog();
}

function goHome(){
document.getElementById("catalogSection").style.display="none";
document.getElementById("shopSection").style.display="none";
document.getElementById("homeView").style.display="block";
}

/* ---------- CATALOG ---------- */
function renderCatalog(){
let html="";
window.products.forEach(p=>{
if(p.externalUrl!="#"){
html+=`
<div class="col-12">
<div class="card p-3">
<h5>${p.title}</h5>
<p>Rs ${p.price}</p>
<a href="${p.externalUrl}" target="_blank" class="btn btn-primary">Ù„Ù†Ú© Ú©Ú¾ÙˆÙ„ÛŒÚº</a>
</div>
</div>`;
}
});
document.getElementById("catalogContainer").innerHTML=html;
}

/* ---------- CART ---------- */
function renderCart(){
let html="";
window.products.forEach(p=>{
if(p.externalUrl=="#"){
html+=`
<div class="card p-3 mb-2">
<h5>${p.title}</h5>
<p>Rs ${p.price}</p>
<button onclick="addToCart(${p.id})" class="btn btn-dark">Ú©Ø§Ø±Ù¹ Ù…ÛŒÚº Ø´Ø§Ù…Ù„ Ú©Ø±ÛŒÚº</button>
</div>`;
}
});
document.getElementById("cartItems").innerHTML=html;
}

function addToCart(id){
let product=window.products.find(p=>p.id==id);
cart.push(product);
alert("Ú©Ø§Ø±Ù¹ Ù…ÛŒÚº Ø´Ø§Ù…Ù„ ÛÙˆÚ¯ÛŒØ§");
}

/* ---------- DELIVERY ---------- */
function updateDelivery(){
let p=document.getElementById("province").value;
if(p=="peshawar")delivery=window.deliveryConfig.peshawar;
else if(p=="kpk")delivery=window.deliveryConfig.khyberPakhtunkhwa;
else if(p=="other")delivery=window.deliveryConfig.otherProvinces;
else if(p=="pickup")delivery=0;

document.getElementById("deliveryText").innerHTML="ÚˆÙ„ÛŒÙˆØ±ÛŒ Ú†Ø§Ø±Ø¬: Rs "+delivery;
}

/* ---------- ORDER ---------- */
function submitOrder(e){
e.preventDefault();
if(cart.length==0){alert("Ú©Ø§Ø±Ù¹ Ø®Ø§Ù„ÛŒ ÛÛ’");return;}

let name=document.getElementById("name").value;
let phone=document.getElementById("phone").value;

let msg="ğŸ›ï¸ Ù†ÛŒØ§ Ø¢Ø±ÚˆØ± - SSelix\n\n";
cart.forEach(p=>msg+=p.title+" - Rs "+p.price+"\n");
msg+="\nÚˆÙ„ÛŒÙˆØ±ÛŒ: Rs "+delivery;

window.open("https://wa.me/"+window.siteConfig.whatsappNumber+"?text="+encodeURIComponent(msg));
}
</script>

</body>
</html>